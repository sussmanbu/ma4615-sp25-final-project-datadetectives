{
  "hash": "3c8bc9dcff29affed6e11d56fa4eb41a",
  "result": {
    "engine": "knitr",
    "markdown": "---\ntitle: \"Blog Post #4\"\nsubtitle: \"Exploratory Data Analysis\"\ndescription:  |\n  This is data detectives' fourth blog post, where we do some initial\n  exploratory data analysis on our cleaned data set.\nauthor: \"Data Detectives\"\ndate: \"2025-03-28\"\ndate-modified: \"2025-03-28\"\ndraft: FALSE\n---\n\n\nFor this blog post some members of our team each did exploratory analysis into our Data. \n\n\n# Chandini's Graph\n\n\n::: {.cell}\n\n```{.r .cell-code}\nlibrary(tidyverse)\n```\n\n::: {.cell-output .cell-output-stderr}\n\n```\nWarning: package 'tidyverse' was built under R version 4.4.2\n```\n\n\n:::\n\n::: {.cell-output .cell-output-stderr}\n\n```\n── Attaching core tidyverse packages ──────────────────────── tidyverse 2.0.0 ──\n✔ dplyr     1.1.4     ✔ readr     2.1.5\n✔ forcats   1.0.0     ✔ stringr   1.5.1\n✔ ggplot2   3.5.1     ✔ tibble    3.2.1\n✔ lubridate 1.9.3     ✔ tidyr     1.3.1\n✔ purrr     1.0.2     \n── Conflicts ────────────────────────────────────────── tidyverse_conflicts() ──\n✖ dplyr::filter() masks stats::filter()\n✖ dplyr::lag()    masks stats::lag()\nℹ Use the conflicted package (<http://conflicted.r-lib.org/>) to force all conflicts to become errors\n```\n\n\n:::\n\n```{.r .cell-code}\nlibrary(scales)\n```\n\n::: {.cell-output .cell-output-stderr}\n\n```\n\nAttaching package: 'scales'\n\nThe following object is masked from 'package:purrr':\n\n    discard\n\nThe following object is masked from 'package:readr':\n\n    col_factor\n```\n\n\n:::\n\n```{.r .cell-code}\nnls_data_clean <- read_rds(\"dataset/nls_clean.rds\")\n\n#define correct order of education levels(neeeded for next query)\neducation_levels <- c(\n  \"1ST GRADE\", \"2ND GRADE\", \"3RD GRADE\", \"4TH GRADE\", \"5TH GRADE\", \"6TH GRADE\", \n  \"7TH GRADE\", \"8TH GRADE\", \"9TH GRADE\", \"10TH GRADE\", \"11TH GRADE\", \"12TH GRADE\", \n  \"1ST YEAR COLLEGE\", \"2ND YEAR COLLEGE\", \"3RD YEAR COLLEGE\", \"4TH YEAR COLLEGE\", \n  \"5TH YEAR COLLEGE\", \"6TH YEAR COLLEGE\", \"7TH YEAR COLLEGE\", \"8TH YEAR COLLEGE OR MORE\",\n  \"UNGRADED\", NA\n)\n\n#mutate to order based on most education completed \nnls_data_clean <- nls_data_clean %>%\n  mutate(Highest_Grade_Completed = factor(Highest_Grade_Completed, \n                                          levels = education_levels,\n                                          ordered = TRUE))\n#Calcualte average mean_income for each grade category\nincome_by_grade <- nls_data_clean %>%\n  group_by(Highest_Grade_Completed) %>%\n  summarise(mean_income = mean(Total_Income_Prev_Year, na.rm = TRUE)) %>%\n  filter(!is.na(Highest_Grade_Completed))\n\n#income vs highest grade plotted with ggplot\nggplot(income_by_grade, aes(x = Highest_Grade_Completed, y = mean_income, group = 1)) +\n  geom_line(color = \"steelblue\", linewidth = 1.2) +\n  geom_point(color = \"darkred\", size = 2) +\n  labs(title = \"Average Income by Highest Grade Completed\",\n       x = \"Highest Grade Completed\",\n       y = \"Average Income\") +\n  scale_y_continuous(labels = label_comma()) +\n  theme_minimal() +\n  theme(axis.text.x = element_text(angle = 90, vjust = 0.5, hjust = 1))\n```\n\n::: {.cell-output-display}\n![](blog-post-4_files/figure-html/chandini graphs-1.png){width=672}\n:::\n:::\n\nHere, we analyze the relationship between highest grade completed and average income. In order to create this plot, we had to order each grade group and calculate mean incomes for each one. Finally, we discovered the positive relationship we predicted. This data shows that the more education people completed, the higher their income. However, we also see the presence of outliers impacting the data's skew. Regardless, these variables will be useful for future data analysis when we combine our data with recession data. Hopefully, we can compare these variables to recession information and compare the relationship between them before and after. \n\n# Aretha's Graph\n\n::: {.cell}\n\n```{.r .cell-code}\nlibrary(scales)\nnls_data_clean <- read_rds(\"dataset/nls_clean.rds\")\n\nnls_data_clean <- nls_data_clean %>%\n  filter(!is.na(Region))\n\n# Regional Variation in Gender Income Gap\nggplot(nls_data_clean, aes(x = Region, y = Total_Income_Prev_Year, fill = Sex)) +\n  geom_boxplot(outlier.alpha = 0.5, outlier.size = 1) +\n  labs(title = \"Income Distribution by Region and Gender\",\n       x = \"Region\", \n       y = \"Total Income (Previous Year)\", \n       fill = \"Gender\") +\n  theme_minimal() +\n  theme(axis.text.x = element_text(angle = 45, hjust = 1)) +\n  scale_y_continuous(labels = scales::comma)\n```\n\n::: {.cell-output .cell-output-stderr}\n\n```\nWarning: Removed 359 rows containing non-finite outside the scale range\n(`stat_boxplot()`).\n```\n\n\n:::\n\n::: {.cell-output-display}\n![](blog-post-4_files/figure-html/aretha graphs-1.png){width=672}\n:::\n:::\n\nThis box plot explores the depth of the relationship between income, gender and region to examine whether there are any disparities between genders. In order to plot this graph, I had to add the 'region' column which describes which region of the US participants reside in - this usually has an impact on base salaries and living expenses. We believe this data column will become increasingly useful in further analysis as we look to add recession data as our 2nd dataset. We can potentially look how certain regions were impacted (based on income/debt) in comparison to others.\n\n# Ran's Model\n\n::: {.cell}\n\n```{.r .cell-code}\nlibrary(scales)\nlibrary(car)\n```\n\n::: {.cell-output .cell-output-stderr}\n\n```\nLoading required package: carData\n```\n\n\n:::\n\n::: {.cell-output .cell-output-stderr}\n\n```\n\nAttaching package: 'car'\n```\n\n\n:::\n\n::: {.cell-output .cell-output-stderr}\n\n```\nThe following object is masked from 'package:dplyr':\n\n    recode\n```\n\n\n:::\n\n::: {.cell-output .cell-output-stderr}\n\n```\nThe following object is masked from 'package:purrr':\n\n    some\n```\n\n\n:::\n\n```{.r .cell-code}\nnls_data_clean <- read_rds(\"dataset/nls_clean.rds\")\n\nnls_data_clean_filtered <- nls_data_clean %>%\n  filter(!is.na(Total_Income_Prev_Year), is.finite(Total_Income_Prev_Year))\n\nset.seed(1234)\nmodel = lm(Total_Income_Prev_Year ~ Race + Sex + Marital_Status, data = nls_data_clean_filtered)\nmodel_data = model.frame(model)\nmodel_data$Predicted = predict(model)\nsummary(model)\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n\nCall:\nlm(formula = Total_Income_Prev_Year ~ Race + Sex + Marital_Status, \n    data = nls_data_clean_filtered)\n\nResiduals:\n   Min     1Q Median     3Q    Max \n-63483 -28742  -9317  14905 295913 \n\nCoefficients:\n                            Estimate Std. Error t value Pr(>|t|)    \n(Intercept)                    16411       1617  10.151  < 2e-16 ***\nRaceHispanic                    3986       1670   2.387  0.01701 *  \nRaceNon-Black/Non-Hispanic     14684       1369  10.725  < 2e-16 ***\nSexMale                        19741       1140  17.315  < 2e-16 ***\nMarital_StatusMarried          12647       1470   8.605  < 2e-16 ***\nMarital_StatusNever Married    -5821       1899  -3.066  0.00218 ** \nMarital_StatusSeparated        -8236       2808  -2.933  0.00337 ** \nMarital_StatusWidowed          -8836       4206  -2.101  0.03566 *  \n---\nSignif. codes:  0 '***' 0.001 '**' 0.01 '*' 0.05 '.' 0.1 ' ' 1\n\nResidual standard error: 48050 on 7187 degrees of freedom\n  (3 observations deleted due to missingness)\nMultiple R-squared:  0.09739,\tAdjusted R-squared:  0.09651 \nF-statistic: 110.8 on 7 and 7187 DF,  p-value: < 2.2e-16\n```\n\n\n:::\n\n```{.r .cell-code}\nvif(model)\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n                   GVIF Df GVIF^(1/(2*Df))\nRace           1.108749  2        1.026144\nSex            1.011891  1        1.005928\nMarital_Status 1.121768  4        1.014467\n```\n\n\n:::\n:::\n\nThis linear model regression investigates the relationship between total income from the previous year `Total_Income_Prev_Year` and multiple covariates (`Race`, `Sex`, `Marital Status`). While several predictors show statistical significance — notably `Marital_StatusMarried`, `SexMale`, and `RaceNon-Black/Non-Hispanic` — the adj. R-squared value is only ~0.09651, indicating that this model explains just under 10% of the variance in income. The low explanatory power suggests more testing, additional variables, and transformations may be required. When using `plot(model)` earlier (not pictured here), our diagnostic plots (Q-Q plot for instance) suggested that the residuals might not be following a normal distribution, which we need to consider for our next iterations of the model. As of now,  multicollinearity doesn't seem to be an issue given VIF values close to 1, but further refinement of the model is needed before making any conclusive interpretations.  \n",
    "supporting": [
      "blog-post-4_files"
    ],
    "filters": [
      "rmarkdown/pagebreak.lua"
    ],
    "includes": {},
    "engineDependencies": {},
    "preserve": {},
    "postProcess": true
  }
}